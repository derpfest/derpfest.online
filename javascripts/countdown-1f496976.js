function setText(t,e){return requestAnimationFrame(function(){t.textContent=e}),t}function padText(t){return t+="",t.length>1?t:"0"+t}function startCountdowns(t){var e=document.getElementsByClassName(t),n=e.length;if(n<1)return!1;var s=getLocalized({ru:{days:"\u0414\u043d\u0435\u0439:",hours:"\u0427\u0430\u0441\u043e\u0432:",minutes:"\u041c\u0438\u043d\u0443\u0442:",seconds:"\u0421\u0435\u043a\u0443\u043d\u0434:"},en:{days:"Days:",hours:"Hours:",minutes:"Minutes:",seconds:"Seconds:"}});if(1===n)return[s(e[0])];for(var o=[],i=0;i<n;i++)o.push(s(e[i]));return o}function getLocalized(t){var e=document.documentElement,n=e.lang;-1===Object.keys(t).indexOf(n)&&(n="en");var s=t[n];return function(t){return new Countdown(t,s).mount()}}var addChild=function(t){return function(e){return t.appendChild(document.createElement(e))}},Countdown=function(t,e){this.root=t,this.locale=e,this.targetDate=new Date(this.root.dataset.target).getTime(),this.timeLeft=this.targetDate-Date.now(),this.update=this.update.bind(this)};Countdown.prototype.mount=function(){var t=this;if(this.left={},this.timeLeft<1e3)return this.onFinish();this.handles={};var e=addChild(this.root);return e("span").textContent=this.locale.days,this.handles.days=e("div"),e("span").textContent=this.locale.hours,this.handles.hours=e("div"),e("span").textContent=this.locale.minutes,this.handles.minutes=e("div"),e("span").textContent=this.locale.seconds,this.handles.seconds=e("div"),Object.keys(this.handles).map(function(e){return t.handles[e].className="number"}),this.timer=setInterval(function(){var e=t.targetDate-Date.now();if(e<1e3)return clearInterval(t.timer),t.onFinish();t.timeLeft=e,t.update()},1e3),this.update()},Countdown.prototype.onFinish=function(){var t=this,e=t.root;for(clearInterval(this.timer);e.hasChildNodes();)e.removeChild(e.lastChild);e.className="hooray",e.textContent="WE'RE HERE!"},Countdown.prototype.update=function(){var t=this.timeLeft/864e5,e=Math.floor(t);e!==this.left.days&&(this.left.days=e,setText(this.handles.days,e)),t=24*(t-e);var n=Math.floor(t);n!==this.left.hours&&(this.left.hours=n,setText(this.handles.hours,padText(n))),t=60*(t-n);var s=Math.floor(t);s!==this.left.minutes&&(this.left.minutes=s,setText(this.handles.minutes,padText(s))),t=60*(t-s);var o=Math.floor(t);return o!==this.left.seconds&&(this.left.seconds=o,setText(this.handles.seconds,padText(o))),this};var countdowns=startCountdowns("countdown");